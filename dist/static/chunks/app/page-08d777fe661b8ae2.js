(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var o=n(5155),a=n(2115),i=n(7431),r=n(3264),l=n(6134),s=n.n(l),d=n(8999);function h(){let e=(0,a.useRef)(null),t=(0,a.useRef)(null),[n,l]=(0,a.useState)(!1),[h,c]=(0,a.useState)(!1),w=(0,d.useRouter)();return(0,a.useEffect)(()=>{let e=t.current;if(e&&n){let t=e.play();void 0!==t&&t.then(()=>{c(!0),console.log("Audio playing automatically")}).catch(e=>{console.log("Audio autoplay was prevented:",e)})}},[n]),(0,a.useEffect)(()=>{let e=()=>{let e=t.current;e&&!h&&n&&e.play().then(()=>{c(!0),console.log("Audio playing after user interaction")}).catch(e=>{console.log("Audio play was prevented even after interaction:",e)})};return document.addEventListener("click",e),document.addEventListener("touchstart",e),document.addEventListener("keydown",e),()=>{document.removeEventListener("click",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",e)}},[h,n]),(0,a.useEffect)(()=>{let t=e.current,n=e.current;if(!n)return;let o=new i.JeP({canvas:n,antialias:!0,alpha:!0});o.setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(Math.min(window.devicePixelRatio,2));let a={dark:1710666,medium:4286945,light:8900346,highlight:0xadd8e6,accent:0xb0e0e6},l=new r.Z58;l.fog=new r.jUj(a.dark,15,50);let s=new r.ubm(75,window.innerWidth/window.innerHeight,.1,1e3);s.position.set(0,10,20);let d=new r.$p8(a.light,.5);l.add(d);let h=new r.ZyN(0xffffff,1);h.position.set(5,10,7.5),l.add(h);let c=new r.HiM(a.light,1,30);c.position.set(-5,5,-15),l.add(c);let w=new r.HiM(a.highlight,1,30);w.position.set(8,3,-25),l.add(w);let f=new r.B6O([new r.Pq0(-4,0,10),new r.Pq0(-2,0,0),new r.Pq0(3,0,-10),new r.Pq0(-1,0,-20),new r.Pq0(2,0,-30),new r.Pq0(-3,0,-40),new r.Pq0(0,0,-50),new r.Pq0(4,0,-60),new r.Pq0(-2,0,-70),new r.Pq0(0,0,-80)]),p=f.getPoints(100),u=new r.LoY().setFromPoints(p),M=new r.N1A(u,new r.mrM({color:a.accent,visible:!1}));l.add(M);let m=[];for(let e=0;e<p.length;e++){let t,n=p[e];t=e<p.length-1?new r.Pq0().subVectors(p[e+1],n).normalize():new r.Pq0().subVectors(n,p[e-1]).normalize();let o=new r.Pq0(-t.z,0,t.x).normalize(),a=new r.Pq0().copy(n).add(o.clone().multiplyScalar(3)),i=new r.Pq0().copy(n).add(o.clone().multiplyScalar(-3));m.push({left:a,right:i})}let y=new r.LoY,g=[],x=[];for(let e=0;e<m.length;e++){let{left:t,right:n}=m[e];g.push(t.x,t.y,t.z),g.push(n.x,n.y,n.z)}for(let e=0;e<m.length-1;e++){let t=2*e,n=2*e+1,o=(e+1)*2,a=(e+1)*2+1;x.push(t,o,n),x.push(n,o,a)}y.setAttribute("position",new r.qtW(g,3)),y.setIndex(x),y.computeVertexNormals();let _=new r._4j({color:a.medium,metalness:.3,roughness:.4,side:r.$EB,emissive:a.medium,emissiveIntensity:.2}),F=new r.eaF(y,_);l.add(F);let P=new r.LoY,z=new Float32Array(15e3),b=new Float32Array(5e3),j=new Float32Array(15e3);for(let e=0;e<15e3;e+=3){let t=Math.floor(Math.random()*p.length),n=p[t];.4>Math.random()?(z[e]=n.x+(Math.random()-.5)*15,z[e+1]=8*Math.random(),z[e+2]=n.z+(Math.random()-.5)*8):.7>Math.random()?(z[e]=(Math.random()-.5)*60,z[e+1]=20*Math.random(),z[e+2]=(Math.random()-.5)*120-20):(z[e]=(Math.random()-.5)*100,z[e+1]=50*Math.random(),z[e+2]=(Math.random()-.5)*200-50),b[e/3]=2*Math.random(),Math.random()>.8?(j[e]=1,j[e+1]=1,j[e+2]=.5*Math.random()+.5):(j[e]=.3*Math.random()+.7,j[e+1]=.3*Math.random()+.7,j[e+2]=1)}P.setAttribute("position",new r.THS(z,3)),P.setAttribute("size",new r.THS(b,1)),P.setAttribute("color",new r.THS(j,3));let v=new r.BH$({size:.1,color:a.highlight,transparent:!0,opacity:.8,blending:r.EZo,vertexColors:!0}),q=new r.ONl(P,v);l.add(q);for(let e=0;e<50;e++){let e=Math.floor(Math.random()*p.length),t=p[e];if(!t)continue;let n=(Math.random()>.5?1:-1)*(5+8*Math.random()),o=new r.Pq0(-t.z,0,t.x).normalize(),a=new r.Pq0().copy(t).add(o.clone().multiplyScalar(n)),i=Math.random()>.8?"sunflower":"regular",s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"regular",o=new r.YJl;if("sunflower"===n){let e=new r.Ho_(.08,.05,2,8),t=new r._4j({color:3050327}),n=new r.eaF(e,t);n.position.y=1,o.add(n);let a=new r.Gu$(.3,8,8);a.scale(1,.3,1);let i=new r._4j({color:3978097});for(let e=0;e<2;e++){let t=new r.eaF(a,i);t.position.set(.3*(0===e?1:-1),.8+.5*Math.random(),0),t.rotation.z=Math.PI/6*(0===e?1:-1),o.add(t)}let l=new r.tcD(.5,32),s=new r._4j({color:6636321,side:r.$EB}),d=new r.eaF(l,s);d.position.y=2,d.rotation.x=-Math.PI/2,o.add(d);let h=new r.Gu$(.25,8,8);h.scale(1,.2,.5);let c=new r._4j({color:0xffd700});for(let e=0;e<16;e++){let t=e/16*Math.PI*2,n=new r.eaF(h,c);n.position.set(.7*Math.cos(t),2,.7*Math.sin(t)),n.rotation.x=Math.PI/2,n.rotation.y=-t,o.add(n)}}else{let e=new r.Ho_(.05,.05,1,8),t=new r._4j({color:5025616}),n=new r.eaF(e,t);n.position.y=.5,o.add(n);let a=new r.Gu$(.2,8,8),i=new r.Q1f().setHSL(.6+.2*Math.random(),.7,.7),l=new r._4j({color:i});for(let e=0;e<5;e++){let t=new r.eaF(a,l),n=e/5*Math.PI*2;t.position.set(.2*Math.cos(n),1+.05*Math.sin(n),.2*Math.sin(n)),t.scale.set(.7,.7,.7),o.add(t)}let s=new r.Gu$(.1,8,8),d=new r._4j({color:0xffeb3b}),h=new r.eaF(s,d);h.position.y=1,o.add(h)}return o.position.set(e,0,t),o}(a.x,a.z,i);l.add(s)}let E=(e,t)=>{let n=new r.YJl,o=new r.qU7(.05,.2,8,8),a=new r._4j({color:0}),i=new r.eaF(o,a);i.rotation.x=Math.PI/2,n.add(i);let l=new r.ypk;l.moveTo(0,0),l.quadraticCurveTo(.3,.2,.5,0),l.quadraticCurveTo(.3,-.2,0,0);let s=new r.MSw(l),d=new r._4j({color:new r.Q1f(.2*Math.random()+.8,.2*Math.random()+.8,1),side:r.$EB,transparent:!0,opacity:.7}),h=new r.eaF(s,d);h.position.set(0,0,.05),n.add(h);let c=new r.eaF(s,d);return c.rotation.y=Math.PI,c.position.set(0,0,-.05),n.add(c),n.position.set(e,1.5+Math.random(),t),n},I=[];for(let e=0;e<15;e++)try{let e=Math.floor(Math.random()*p.length),t=p[e];if(!t)continue;let n=(Math.random()-.5)*20,o=E(t.x+n,t.z+n);l.add(o),I.push(o)}catch(e){console.error("Error creating butterfly:",e)}let H=(e,t)=>{let n=new r.YJl,o=new r.Gu$(.3,16,16);o.scale(1,.8,1.2);let a=new r._4j({color:0xf5f5f5}),i=new r.eaF(o,a);i.position.y=.3,n.add(i);let l=new r.Gu$(.2,16,16),s=new r._4j({color:0xf5f5f5}),d=new r.eaF(l,s);d.position.set(.25,.5,0),n.add(d);let h=new r.qU7(.05,.3,8,8),c=new r._4j({color:0xf5f5f5}),w=new r.eaF(h,c);w.position.set(.25,.7,.1),w.rotation.x=-Math.PI/12,w.rotation.z=-Math.PI/8,n.add(w);let f=new r.eaF(h,c);f.position.set(.25,.7,-.1),f.rotation.x=Math.PI/12,f.rotation.z=-Math.PI/8,n.add(f);let p=new r.Gu$(.1,8,8);p.scale(1,.6,1);let u=new r._4j({color:0xf0f0f0});[[.1,0,.15],[.1,0,-.15]].forEach(e=>{let t=new r.eaF(p,u);t.position.set(e[0],e[1],e[2]),n.add(t)});let M=new r.Gu$(.12,8,8);M.scale(1,.7,1),[[-.2,0,.15],[-.2,0,-.15]].forEach(e=>{let t=new r.eaF(M,u);t.position.set(e[0],e[1],e[2]),n.add(t)});let m=new r.Gu$(.1,8,8),y=new r._4j({color:0xffffff}),g=new r.eaF(m,y);return g.position.set(-.35,.3,0),n.add(g),n.position.set(e,0,t),n},N=[];for(let e=0;e<5;e++)try{let t=Math.floor(p.length/5*e+p.length/10);if(t>=p.length)continue;let n=p[t];if(!n)continue;let o=(e%2==0?1:-1)*10,a=new r.Pq0(-n.z,0,n.x).normalize(),i=new r.Pq0().copy(n).add(a.clone().multiplyScalar(o)),s=H(i.x,i.z);l.add(s),N.push(s)}catch(e){console.error("Error creating rabbit:",e)}let S=(e,t)=>{let n=new r.YJl,o=new r.qU7(.5,1,4,8),i=new r._4j({color:9076621}),l=new r.eaF(o,i);l.rotation.z=Math.PI/2,n.add(l);let s=new r.Gu$(.3,8,8),d=new r._4j({color:0x9e9e9e}),h=new r.eaF(s,d);h.position.set(.8,.5,0),n.add(h);let c=new r._4j({color:a.light}),w=new r.Ho_(.03,.03,.5,8),f=new r.eaF(w,c);f.position.set(.8,.8,.15),f.rotation.z=-Math.PI/4,n.add(f);let p=new r.Ho_(.03,.03,.5,8),u=new r.eaF(p,c);u.position.set(.8,.8,-.15),u.rotation.z=-Math.PI/4,n.add(u);let M=new r.Ho_(.1,.05,1,8),m=new r._4j({color:0x9e9e9e});return[[-.3,-.5,.3],[-.3,-.5,-.3],[.3,-.5,.3],[.3,-.5,-.3]].forEach(e=>{let t=new r.eaF(M,m);t.position.set(e[0],e[1],e[2]),n.add(t)}),n.position.set(e,1,t),n.scale.set(.7,.7,.7),n},B=[];for(let e=0;e<3;e++)try{let t=Math.floor(p.length/3*(e+1)),n=p[t];if(!n)continue;let o=(e%2==0?1:-1)*12,a=new r.Pq0(n.x+o,1,n.z),i=S(a.x,a.z);l.add(i),B.push(i)}catch(e){console.error("Error placing deer:",e)}let A=Math.floor(p.length/5),$=p[A];if($){let e=new r.Pq0(-$.z,0,$.x).normalize(),t=new r.Pq0().copy($).add(e.clone().multiplyScalar(7.5)),n=(()=>{let e=new r.YJl,t=new r.Ho_(5,5,.5,16),n=new r._4j({color:9076621}),o=new r.eaF(t,n);o.position.y=.25,e.add(o);let i=(e,t,n,o,a)=>{let i=new r.qFE(o,n,16),l=new r._4j({color:a,roughness:.8}),s=new r.eaF(i,l);return s.position.set(e,n/2+.5,t),s},l=i(-1.5,-1,3,1.2,4940885),s=i(0,-1.5,2.5,1,3821637),d=i(1.5,-.8,2,.8,5668206);e.add(l,s,d);let h=new r.Ho_(3,3,.2,32),c=new r._4j({color:a.light,transparent:!0,opacity:.8,metalness:.2,roughness:.1}),w=new r.eaF(h,c);w.position.set(0,.6,1.5),e.add(w);let f=new r.bdM(6,2.5,32,8),p=new r._4j({color:a.medium,transparent:!0,opacity:.5,side:r.$EB}),u=new r.eaF(f,p);u.rotation.x=-Math.PI/2,u.position.set(0,.7,1.5);let M=u.geometry.attributes.position.array;for(let e=0;e<M.length;e+=3){let t=M[e],n=M[e+2];M[e+1]=.1*Math.sin(2*t+n)}return u.geometry.attributes.position.needsUpdate=!0,e.add(u),e.scale.set(.4,.4,.4),e})();n.position.set(t.x,0,t.z),n.scale.set(.6,.6,.6);let o=new r.Pq0().subVectors($,t).normalize();n.rotation.y=Math.atan2(o.x,o.z),l.add(n);let i=((e,t,n,o)=>{let i=new r.YJl,l=new r.eaF(new r.iNn(4,1.5,.1),new r._4j({color:a.dark,metalness:.5,roughness:.3}));i.add(l);let s=new r.YJl;s.add(new r.eaF(new r.iNn(1.2,.2,.3),new r._4j({color:o})));let d=new r.eaF(new r.iNn(.2,1,.3),new r._4j({color:o}));d.position.y=-.4,s.add(d);let h=new r.eaF(new r.iNn(.2,.6,.3),new r._4j({color:o}));h.position.set(-.5,-.2,0),s.add(h);let c=new r.eaF(new r.iNn(.5,.2,.3),new r._4j({color:o}));c.position.set(.35,-.3,0),s.add(c),s.position.set(-1,0,.1),i.add(s);let w=new r.YJl,f=new r.eaF(new r.iNn(1,1,.1),new r._4j({color:o,wireframe:!0}));w.add(f);let p=new r.eaF(new r.iNn(.8,.2,.3),new r._4j({color:o}));p.position.y=.3,w.add(p);let u=new r.eaF(new r.iNn(.8,.2,.3),new r._4j({color:o}));u.position.y=0,w.add(u);let M=new r.eaF(new r.iNn(.8,.2,.3),new r._4j({color:o}));M.position.y=-.3,w.add(M),w.position.set(1,0,.1),i.add(w);let m=new r.eaF(new r.iNn(3,.3,.2),new r._4j({color:o}));return m.position.set(0,-.6,.1),i.add(m),i.position.set(0,t,0),i.scale.set(n,n,n),i})(0,6,1.5,0xffff00);i.position.set(t.x,6,t.z),i.rotation.copy(n.rotation),i.rotation.x=-Math.PI/6;let s=new r.eaF(new r.iNn(6.5,3,.05),new r.V9B({color:65535,transparent:!0,opacity:.3}));s.position.copy(i.position),s.position.z-=.1,s.rotation.copy(i.rotation),l.add(i,s);let d=new r.HiM(0xffffff,8,15);d.position.set(t.x,8,t.z-3),l.add(d);let h=new r.eaF(new r.Ho_(.15,.15,6,8),new r._4j({color:a.light,metalness:.7,roughness:.3}));h.position.set(t.x,3,t.z),l.add(h);let c=l.userData.animateFunctions||[];c.push(e=>{i.position.y=6+.2*Math.sin(.5*e),d.intensity=8+2*Math.sin(.7*e),i.rotation.z=.05*Math.sin(.3*e)}),l.userData.animateFunctions=c}let k=e=>{let t=new r.YJl,n=new r.Gu$(.2,8,8),o=new r.V9B({color:e,transparent:!0,opacity:.6}),a=new r.eaF(n,o);a.position.y=1.6,t.add(a);let i=new r.qU7(.15,1,4,8),l=new r.eaF(i,o);l.position.y=1,t.add(l);let s=new r.qU7(.1,.8,4,8),d=new r.eaF(s,o);d.position.set(-.1,.4,0),t.add(d);let h=new r.eaF(s,o);h.position.set(.1,.4,0),t.add(h);let c=new r.qU7(.08,.7,4,8),w=new r.eaF(c,o);w.position.set(-.25,1.1,0),w.rotation.z=Math.PI/12,t.add(w);let f=new r.eaF(c,o);return f.position.set(.25,1.1,0),f.rotation.z=-Math.PI/12,t.add(f),t},D=k(0xd4bbff),T=k(8900346),Y=p[0];D.position.set(Y.x-.5,0,Y.z),T.position.set(Y.x+.5,0,Y.z),l.add(D,T);let C=new r.zD7,G=0,L=0,Q=!1,J=0,V=new r.YJl,U=new r.bdM(6,3),O=new r.GOR(function(e){let t=document.createElement("canvas");t.width=1024,t.height=512;let n=t.getContext("2d");if(!n)return t;let o=n.createLinearGradient(0,0,t.width,t.height);o.addColorStop(0,"#8a2387"),o.addColorStop(.5,"#e94057"),o.addColorStop(1,"#f27121"),n.fillStyle=o,Z(n,20,20,t.width-40,t.height-40,40,!0),n.fillStyle="rgba(255, 255, 255, 0.85)",Z(n,40,40,t.width-80,t.height-80,30,!0),n.fillStyle="#000000",n.font='bold 96px "Microsoft YaHei", "SimHei", sans-serif',n.textAlign="center",n.textBaseline="middle",n.shadowColor="rgba(0, 0, 0, 0.3)",n.shadowBlur=5,n.shadowOffsetX=2,n.shadowOffsetY=2,n.fillText(e,t.width/2,t.height/2),n.shadowColor="transparent";let a=["#8a2387","#e94057","#f27121"];for(let e=0;e<a.length;e++)n.fillStyle=a[e],n.beginPath(),n.arc(t.width-80+25*e,80-5*e,15,0,2*Math.PI),n.fill();return t}("福州，我们来了~")),R=new r.V9B({map:O,transparent:!0,depthWrite:!1,opacity:.95}),W=new r.eaF(U,R);function Z(e,t,n,o,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+o-i,n),e.arcTo(t+o,n,t+o,n+i,i),e.lineTo(t+o,n+a-i),e.arcTo(t+o,n+a,t+o-i,n+a,i),e.lineTo(t+i,n+a),e.arcTo(t,n+a,t,n+a-i,i),e.lineTo(t,n+i),e.arcTo(t,n,t+i,n,i),e.closePath(),r&&e.fill(),l&&e.stroke()}W.position.set(0,3,0),V.add(W),V.visible=!1,l.add(V);let K=()=>{let e=C.getElapsedTime(),t=e-G;G=e;let n=q.geometry.attributes.position.array;for(let t=0;t<n.length;t+=3)n[t+1]+=.002*Math.sin(e+.5*n[t]);q.geometry.attributes.position.needsUpdate=!0;let a=L>A/p.length-.01&&L<A/p.length+.01;if(a){if(!Q){Q=!0,V.visible=!0;let e=new r.Pq0(D.position.x+(T.position.x-D.position.x)/2,0,D.position.z+(T.position.z-D.position.z)/2),t=f.getTangentAt(L),n=new r.Pq0(-t.z,0,t.x).normalize().multiplyScalar(3);V.position.copy(e),V.position.add(n),V.position.y=4.5,V.scale.set(.1,.1,.1),l.userData.animateFunctions=l.userData.animateFunctions||[],l.userData.animateFunctions.push(e=>{V.scale.x<1.3&&(V.scale.x+=.05,V.scale.y+=.05,V.scale.z+=.05)}),l.userData.animateFunctions.push(e=>{V.visible&&(V.rotation.z=.05*Math.sin(.5*e),V.position.y=4.5+.1*Math.sin(.7*e))}),V.lookAt(s.position)}}else(L+=1e-5*t*1e3)>1&&(L=0);if(Q){if((J+=t)>5&&V.visible){let e=()=>{if(W.material.opacity>0&&(W.material.opacity-=.01,W.material.opacity<=0)){V.visible=!1;let t=l.userData.animateFunctions.indexOf(e);t>-1&&l.userData.animateFunctions.splice(t,1)}};l.userData.animateFunctions.push(e)}V.lookAt(s.position)}let i=f.getPointAt(L),d=f.getTangentAt(L);(D.position.set(i.x-.5*d.z,0,i.z+.5*d.x),T.position.set(i.x+.5*d.z,0,i.z-.5*d.x),D.rotation.y=Math.atan2(d.x,d.z),T.rotation.y=Math.atan2(d.x,d.z),a)?(D.children[5]&&(D.children[5].rotation.x=0,D.children[5].rotation.z=-Math.PI/4+.5*Math.sin(2*e)),T.children[4]&&(T.children[4].rotation.x=0,T.children[4].rotation.z=Math.PI/4+.5*Math.sin(2*e+.8))):(D.children[4]&&D.children[5]&&(D.children[4].rotation.x=.5*Math.sin(3*e),D.children[5].rotation.x=-(.5*Math.sin(3*e))),T.children[4]&&T.children[5]&&(T.children[4].rotation.x=.5*Math.sin(3*e+.5),T.children[5].rotation.x=-(.5*Math.sin(3*e+.5))),D.children[2]&&D.children[3]&&(D.children[2].rotation.z=.3*Math.sin(3*e),D.children[3].rotation.z=-(.3*Math.sin(3*e))),T.children[2]&&T.children[3]&&(T.children[2].rotation.z=.3*Math.sin(3*e+.5),T.children[3].rotation.z=-(.3*Math.sin(3*e+.5))),D.children[4]&&D.children[5]&&(D.children[4].rotation.z=-(.25*Math.sin(3*e)),D.children[5].rotation.z=.25*Math.sin(3*e)),T.children[4]&&T.children[5]&&(T.children[4].rotation.z=-(.25*Math.sin(3*e+.5)),T.children[5].rotation.z=.25*Math.sin(3*e+.5))),D.children.forEach(t=>{t instanceof r.eaF&&t.material instanceof r.V9B&&(t.material.opacity=.4+.2*Math.sin(.5*e))}),T.children.forEach(t=>{t instanceof r.eaF&&t.material instanceof r.V9B&&(t.material.opacity=.4+.2*Math.sin(.5*e+Math.PI))}),B.forEach((t,n)=>{t.rotation.y=.2*Math.sin(.2*e+n),t.children[1]&&(t.children[1].rotation.x=.1*Math.sin(.6*e+n))}),I.forEach((t,n)=>{let o=.5*Math.sin(e*(5+2*Math.sin(n)));t.children[1]&&(t.children[1].rotation.z=o),t.children[2]&&(t.children[2].rotation.z=-o);let a=2+n%3,i=.3*e;t.position.y=1.5+.5*Math.sin(i*a+n),t.position.x+=.01*Math.sin(i*a+n),t.position.z+=.01*Math.cos(i*(3+n%2)+n)}),N.forEach((t,n)=>{t.children[2]&&t.children[3]&&(t.children[2].rotation.x=-Math.PI/12+.05*Math.sin(1.5*e+n),t.children[3].rotation.x=Math.PI/12+.05*Math.sin(1.5*e+n+Math.PI)),Math.sin(.2*e+5*n)>.97?t.position.y=.1*Math.sin((e+n)*5):t.position.y=0}),l.userData.animateFunctions&&l.userData.animateFunctions.forEach(t=>{t(e)}),o.render(l,s),requestAnimationFrame(K)};K();let X=()=>{s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)};window.addEventListener("resize",X);let ee=(()=>{let e=new r.YJl,t=(e,t,n)=>{let o=new r.YJl,a=[2899536,3426654,4941188,6058908];for(let i=0;i<8;i++){let i=15+25*Math.random(),l=10+15*Math.random(),s=6+Math.floor(6*Math.random()),d=new r.qFE(l,i,s),h=new r._4j({color:a[Math.floor(Math.random()*a.length)],flatShading:!0,roughness:.9}),c=new r.eaF(d,h),w="left"===n?-80-60*Math.random()+e:80+60*Math.random()+e,f=-100-150*Math.random()+t;c.position.set(w,i/2-5,f),c.rotation.y=Math.random()*Math.PI,o.add(c)}for(let a=0;a<3;a++){let a=28+12*Math.random(),i=12+8*Math.random(),l=new r.qFE(i,a,8),s=new r._4j({color:4941188,flatShading:!0,roughness:.8}),d=new r.eaF(l,s),h=new r.qFE(.8*i,.3*a,8),c=new r._4j({color:0xffffff,flatShading:!0,roughness:.6}),w=new r.eaF(h,c);w.position.y=.4*a,d.add(w);let f="left"===n?-130-40*Math.random()+e:130+40*Math.random()+e,p=-180-100*Math.random()+t;d.position.set(f,a/2-5,p),o.add(d)}return o},n=t(-30,0,"left");e.add(n);let o=t(30,-50,"right");e.add(o);let i=new r.Gu$(15,32,32),l=new r.V9B({color:0xffcc66,transparent:!0,opacity:.8}),s=new r.eaF(i,l);s.position.set(120,60,-200);let d=new r.Gu$(25,32,32),h=new r.V9B({color:0xffcc66,transparent:!0,opacity:.3}),c=new r.eaF(d,h);s.add(c);let w=new r.HiM(0xffffff,1,300);w.position.set(0,0,0),s.add(w),e.add(s);let f=new r.bdM(40,400,20,40),p=f.attributes.position.array;for(let e=0;e<p.length;e+=3){let t=p[e],n=p[e+1];p[e+2]=.5*Math.sin(.5*t)+.3*Math.cos(.3*n)}let u=new r._4j({color:a.light,transparent:!0,opacity:.8,metalness:.3,roughness:.2}),M=new r.eaF(f,u);M.rotation.x=-Math.PI/2,M.position.set(-60,.2,-100),e.add(M);let m=new r.bdM(100,200,30,30),y=new r._4j({color:0xf5e1b3,roughness:.9}),g=new r.eaF(m,y);g.rotation.x=-Math.PI/2,g.position.set(80,.1,-50),e.add(g);let x=new r.bdM(200,300,50,50),_=x.attributes.position.array;for(let e=0;e<_.length;e+=3){let t=_[e],n=_[e+1];_[e+2]=1.2*Math.sin(.2*t+.1*n)}let F=new r._4j({color:4955347,transparent:!0,opacity:.85,metalness:.4,roughness:.15}),P=new r.eaF(x,F);P.rotation.x=-Math.PI/2,P.position.set(150,.3,-100),e.add(P);for(let t=0;t<3;t++){let t=new r.qFE(5+3*Math.random(),3+2*Math.random(),5),n=new r._4j({color:0xc1b396,roughness:.8}),o=new r.eaF(t,n),a=130+60*Math.random(),i=-60-120*Math.random();o.position.set(a,0,i),o.rotation.x=Math.PI/2;let l=1+Math.floor(3*Math.random());for(let e=0;e<l;e++){let e=new r.Ho_(.3,.5,4,6),t=new r._4j({color:9132587,roughness:.8}),n=new r.eaF(e,t),a=3*Math.random()-1.5,i=3*Math.random()-1.5,l=Math.random()*Math.PI*.25;n.position.set(a,2,i),n.rotation.x=-Math.PI/2,n.rotation.z=l;let s=5+Math.floor(4*Math.random());for(let e=0;e<s;e++){let t=new r.bdM(2,3),o=new r._4j({color:3050327,side:r.$EB,transparent:!0,opacity:.9}),a=new r.eaF(t,o),i=e/s*Math.PI*2;a.rotation.set(Math.PI/4,i,0),a.position.y=2,n.add(a)}o.add(n)}e.add(o)}for(let t=0;t<12;t++){let t=new r.YJl,n=3+Math.floor(4*Math.random());for(let e=0;e<n;e++){let o=3+5*Math.random(),a=new r.Gu$(o,7,7),i=new r._4j({color:0xffffff,transparent:!0,opacity:.9-.3*Math.random(),roughness:.2}),l=new r.eaF(a,i),s=1.2*o*e-n*o*.6/2,d=Math.random()*o*.5,h=Math.random()*o*.5;l.position.set(s,d,h),t.add(l)}let o=(Math.random()>.5?1:-1)*(50+100*Math.random()),a=40+30*Math.random(),i=-80-200*Math.random();t.position.set(o,a,i),e.add(t)}return e})();return l.add(ee),l.userData.animateFunctions=l.userData.animateFunctions||[],l.userData.animateFunctions.push(e=>{let t=ee.children[2];if(t&&t.material instanceof r.V9B){let n=1+.05*Math.sin(.2*e);t.scale.set(n,n,n),t.position.y=60+2*Math.sin(.1*e);let o=[new r.Q1f(0xff2200),new r.Q1f(0xff8800),new r.Q1f(0xffcc66),new r.Q1f(0xffffff),new r.Q1f(0xaaaaaa),new r.Q1f(5592405),new r.Q1f(1118481)],a=Math.min(Math.floor(L*o.length),o.length-2),i=L*o.length%1,l=new r.Q1f().copy(o[a]).lerp(o[a+1],i);t.material.color=l,t.position.x=120+-240*L;let s=Math.sin(L*Math.PI);if(t.position.y=20+60*s,t.children[0]&&t.children[0]instanceof r.eaF&&t.children[0].material instanceof r.V9B){let n=t.children[0];n.scale.set(1+.1*Math.sin(.5*e),1+.1*Math.sin(.5*e),1+.1*Math.sin(.5*e)),n.material.color=l}if(t.children[1]&&t.children[1]instanceof r.HiM){let n=t.children[1];n.intensity=1.5*(1-.8*L)+.1*Math.sin(.3*e),n.color=l}}if(d.intensity=.5*(1-.7*L),l.fog instanceof r.jUj){let e=new r.Q1f(a.dark),t=new r.Q1f(2068);l.fog.color.copy(e).lerp(t,L)}let n=ee.children[3];if(n&&n.geometry instanceof r.bdM){let t=n.geometry.attributes.position.array;for(let n=0;n<t.length;n+=3)t[n+2]=.5*Math.sin(.5*e+.03*t[n]+.05*t[n+1]);n.geometry.attributes.position.needsUpdate=!0}let o=ee.children[5];if(o&&o.geometry instanceof r.bdM){let t=o.geometry.attributes.position.array;for(let n=0;n<t.length;n+=3)t[n+2]=.8*Math.sin(.3*e+.05*t[n])+.8*Math.cos(.4*e+.06*t[n+1]);o.geometry.attributes.position.needsUpdate=!0}for(let t=9;t<ee.children.length;t++){let n=ee.children[t];n.position.x+=.03*Math.sin(.1*e+t),n.position.y+=.01*Math.sin(.05*e+.5*t)}}),()=>{window.removeEventListener("resize",X),t&&(o.dispose(),l.clear())}},[]),(0,a.useEffect)(()=>{if(!t.current){let e=new Audio("/music/M500000vyP282Pn71W.mp3");e.loop=!0,e.preload="auto",e.addEventListener("loadeddata",()=>{console.log("音频已加载"),l(!0);try{let t=e.play();void 0!==t&&t.then(()=>{console.log("音频自动播放成功"),c(!0)}).catch(e=>{console.log("音频自动播放被阻止:",e)})}catch(e){console.log("音频播放出错:",e)}}),t.current=e}return()=>{let e=t.current;e&&(e.pause(),e.src="")}},[]),(0,o.jsxs)("div",{className:s().container,children:[(0,o.jsx)("canvas",{ref:e,className:s().canvas}),(0,o.jsxs)("div",{className:s().overlay,children:[(0,o.jsx)("h1",{className:s().title,children:"遇见 Destin"}),(0,o.jsx)("p",{className:s().subtitle,children:"Lumi\xe8re d'\xc9toiles"}),(0,o.jsxs)("div",{className:s().buttons,children:[(0,o.jsx)("button",{className:s().enterBtn,onClick:()=>{w.push("/world");let e=t.current;e&&(e.play().catch(e=>{console.log("Audio play was prevented:",e)}),c(!0))},children:"进入我的世界"}),n&&(0,o.jsx)("button",{className:"".concat(s().musicBtn," ").concat(h?s().playing:""),onClick:()=>{let e=t.current;if(e)if(e.paused){let t=e.play();void 0!==t&&t.then(()=>{c(!0)}).catch(e=>{console.log("Could not play audio:",e)})}else e.pause(),c(!1)},children:h?"暂停音乐":"播放音乐"})]})]})]})}},5052:(e,t,n)=>{Promise.resolve().then(n.bind(n,2868))},6134:e=>{e.exports={container:"Home_container__YRaDf",canvas:"Home_canvas__9_VVR",overlay:"Home_overlay__OpQ_J",title:"Home_title__utdWP",fadeIn:"Home_fadeIn__nAeR2",subtitle:"Home_subtitle__Q3Lh7",buttons:"Home_buttons___tMwn",enterBtn:"Home_enterBtn__bzq4v",musicBtn:"Home_musicBtn__FQHaU",playing:"Home_playing__dKWKC",fireworksCanvas:"Home_fireworksCanvas__QHGDo"}}},e=>{var t=t=>e(e.s=t);e.O(0,[933,367,831,441,684,358],()=>t(5052)),_N_E=e.O()}]);