(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[785],{4808:e=>{e.exports={container:"World_container__moLFg",header:"World_header__L0VGz",text:"World_text__VZ1s_",fadeIn:"World_fadeIn__7unVm",counter:"World_counter__6j7QM",counterCircle:"World_counterCircle__lARH8",musicBtn:"World_musicBtn___GMlb",pulse:"World_pulse__Xi7Oc",canvas:"World_canvas__6mOu_",celebrationCanvas:"World_celebrationCanvas__jscpS"}},5956:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var l=a(5155),r=a(2115),i=a(4808),h=a.n(i);function o(){let e=(0,r.useRef)(null),t=(0,r.useRef)(null),a=(0,r.useRef)(null),i=(0,r.useRef)(null),o=(0,r.useRef)(null),[n,s]=(0,r.useState)(0),[d,f]=(0,r.useState)(""),[c,g]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[y,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=o.current;e&&e.duration>0&&(e.play().catch(e=>{console.log("Audio autoplay was prevented:",e)}),p(!0))},[u]);let M="可爱的向日葵公主，我们的旅程，从这里开始；每一步都将是新的发现，每一刻都是珍贵的回忆，希望我们每天开心、幸福~";return(0,r.useEffect)(()=>{let e;if(!c)return;let t=i.current;if(!t)return;let a=t.getContext("2d");if(!a)return;let l=()=>{t.width=window.innerWidth,t.height=window.innerHeight};l(),window.addEventListener("resize",l);let r=[],h=[],o=["#ff1a1a","#ff751a","#ffff1a","#75ff1a","#1aff1a","#1aff75","#1affff","#1a75ff","#1a1aff","#751aff","#ff1aff","#ff1a75"],n=["#FF9999","#FF66B2","#FF99E6","#E6B3FF","#B3CCFF","#99FFFF","#B3FFB3","#FFFF99","#FFE6B3","#FFCCB3","#F0B3FF","#E6FFCC"],s=()=>{let e=Math.random()*t.width,a=o[Math.floor(Math.random()*o.length)];r.push({x:e,y:t.height,targetY:Math.random()*t.height*.5,vx:2*Math.random()-1,vy:-(5*Math.random())-5,size:3+2*Math.random(),color:a,particles:[],exploded:!1})},d=e=>{e.exploded=!0;let t=50+Math.floor(50*Math.random());for(let a=0;a<t;a++){let t=Math.random()*Math.PI*2,a=5*Math.random()+1;e.particles.push({x:e.x,y:e.y,vx:Math.cos(t)*a,vy:Math.sin(t)*a,size:1+2*Math.random(),color:e.color,alpha:1,gravity:.05+.05*Math.random(),rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.1})}},f=()=>{let e=n[Math.floor(Math.random()*n.length)],a=["#FFD700","#FFA500","#FFFF00","#FFFFFF"];h.push({x:Math.random()*t.width,y:Math.random()*t.height,size:15+25*Math.random(),petalCount:5+Math.floor(7*Math.random()),color:e,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.01,growthProgress:0,growthSpeed:.01+.03*Math.random(),centerColor:a[Math.floor(Math.random()*a.length)],alpha:0,fadeSpeed:.005+.01*Math.random()})},g=e=>{let{x:t,y:l,size:r,petalCount:i,color:h,rotation:o,growthProgress:n,centerColor:s,alpha:d}=e;if(n<=0||d<=0)return;let f=r*n,c=.8*f;a.save(),a.translate(t,l),a.rotate(o),a.globalAlpha=d,a.fillStyle=h;for(let e=0;e<i;e++){let t=e/i*Math.PI*2;a.beginPath(),a.ellipse(Math.cos(t)*f*.3,Math.sin(t)*f*.3,c/2,f/3,t,0,2*Math.PI),a.fill()}a.fillStyle=s,a.beginPath(),a.arc(0,0,.3*f,0,2*Math.PI),a.fill(),a.restore()},u=()=>{a.fillStyle="rgba(0, 0, 0, 0.1)",a.fillRect(0,0,t.width,t.height),Math.random()>.95&&s(),Math.random()>.97&&f();for(let e=r.length-1;e>=0;e--){let t=r[e];if(t.exploded){let l=!0;for(let e=t.particles.length-1;e>=0;e--){let r=t.particles[e];if(r.x+=r.vx,r.y+=r.vy,r.vy+=r.gravity,r.alpha-=.01,r.rotation+=r.rotationSpeed,r.alpha>0){if(l=!1,a.save(),a.translate(r.x,r.y),a.rotate(r.rotation),a.globalAlpha=r.alpha,Math.random()>.7){a.fillStyle=r.color,a.beginPath(),a.arc(0,0,r.size,0,2*Math.PI),a.fill();let e=a.createRadialGradient(0,0,0,0,0,3*r.size);e.addColorStop(0,r.color),e.addColorStop(1,"transparent"),a.fillStyle=e,a.beginPath(),a.arc(0,0,3*r.size,0,2*Math.PI),a.fill()}else a.fillStyle=r.color,a.beginPath(),a.arc(0,0,r.size,0,2*Math.PI),a.fill();a.restore()}}l&&r.splice(e,1)}else t.x+=t.vx,t.y+=t.vy,t.y<=t.targetY&&d(t),a.fillStyle=t.color,a.beginPath(),a.arc(t.x,t.y,t.size,0,2*Math.PI),a.fill(),a.strokeStyle=t.color,a.lineWidth=t.size/2,a.beginPath(),a.moveTo(t.x,t.y),a.lineTo(t.x-5*t.vx,t.y-5*t.vy),a.stroke()}for(let e=h.length-1;e>=0;e--){let t=h[e];t.growthProgress<1?(t.growthProgress+=t.growthSpeed,t.alpha=Math.min(1,t.alpha+.05)):t.alpha-=t.fadeSpeed,t.rotation+=t.rotationSpeed,t.alpha>0?g(t):h.splice(e,1)}e=requestAnimationFrame(u)};u();for(let e=0;e<10;e++)s();for(let e=0;e<15;e++)f();return()=>{cancelAnimationFrame(e),window.removeEventListener("resize",l)}},[c]),(0,r.useEffect)(()=>{let t,a=2e4/M.length,l=Date.now(),r=0,i=setInterval(()=>{r<M.length?(f(M.substring(0,r+1)),r++):clearInterval(i)},a),h=0,o=setInterval(()=>{h<31?s(++h):clearInterval(o)},2e4/31),n=e.current;if(!n)return;let d=n.getContext("2d");if(!d)return;let c=()=>{n.width=window.innerWidth,n.height=.6*window.innerHeight};c(),window.addEventListener("resize",c);let u=n.width+600,m={x:-300,y:.7*n.height,width:300,height:80,speed:u/1200,cars:6,wheels:[],windows:[],smoke:[],distanceToTravel:u,startTime:l,totalDuration:2e4};for(let e=0;e<m.cars;e++){for(let t=0;t<2;t++)m.wheels.push({x:50*e+30*t,y:20,radius:12});for(let t=0;t<3;t++)m.windows.push({x:50*e+15*t+5,y:10,width:12,height:18,lit:Math.random()>.3})}let y=()=>{let e=d.createLinearGradient(0,0,0,n.height);e.addColorStop(0,"#000714"),e.addColorStop(1,"#001437"),d.fillStyle=e,d.fillRect(0,0,n.width,n.height);for(let e=0;e<200;e++){let e=Math.random()*n.width,t=Math.random()*(.7*n.height),a=2*Math.random(),l=.8*Math.random()+.2;d.fillStyle="rgba(255, 255, 255, ".concat(l,")"),d.beginPath(),d.arc(e,t,a,0,2*Math.PI),d.fill()}d.fillStyle="rgba(255, 255, 230, 0.8)",d.beginPath(),d.arc(.8*n.width,.2*n.height,40,0,2*Math.PI),d.fill();let t=d.createRadialGradient(.8*n.width,.2*n.height,40,.8*n.width,.2*n.height,100);t.addColorStop(0,"rgba(255, 255, 230, 0.3)"),t.addColorStop(1,"transparent"),d.fillStyle=t,d.beginPath(),d.arc(.8*n.width,.2*n.height,100,0,2*Math.PI),d.fill()},p=()=>{d.fillStyle="#001025",d.beginPath(),d.moveTo(0,.6*n.height);let e=n.width/5;for(let t=0;t<=5;t++){let a=t*e,l=.6*n.height-(Math.random()*n.height*.15+.05*n.height);if(0===t)d.lineTo(a,l);else{let t=a-.6*e,r=l+(Math.random()*n.height*.05-.025*n.height),i=a-.4*e,h=l-(Math.random()*n.height*.05-.025*n.height);d.bezierCurveTo(t,r,i,h,a,l)}}d.lineTo(n.width,n.height),d.lineTo(0,n.height),d.closePath(),d.fill()},w=()=>-300+Math.min((Date.now()-m.startTime)/m.totalDuration,1)*m.distanceToTravel,v=()=>{d.clearRect(0,0,n.width,n.height),y(),p(),d.strokeStyle="#444",d.lineWidth=5,d.beginPath(),d.moveTo(0,m.y+m.height/2),d.lineTo(n.width,m.y+m.height/2),d.stroke(),d.strokeStyle="#555",d.lineWidth=3;for(let e=0;e<n.width;e+=20)d.beginPath(),d.moveTo(e,m.y+m.height/2-5),d.lineTo(e+15,m.y+m.height/2-5),d.stroke();m.x=w();let e=m.x>=n.width;for(let e=0;e<m.cars;e++){let t=m.x+50*e;t>-50&&t<n.width&&(d.fillStyle=0===e?"#2a4b8d":"#3a6abd",d.fillRect(t,m.y-m.height,45,m.height),0===e&&(d.fillStyle="#1a3b6d",d.fillRect(t+40,m.y-m.height,5,.7*m.height),d.fillStyle="#222",d.fillRect(t+10,m.y-m.height-10,6,10)),m.windows.forEach((a,l)=>{Math.floor(l/3)===e&&(d.fillStyle=a.lit?"rgba(255, 255, 150, 0.7)":"rgba(20, 30, 50, 0.8)",d.fillRect(t+a.x,m.y-m.height+a.y,a.width,a.height),d.strokeStyle="#444",d.lineWidth=1,d.strokeRect(t+a.x,m.y-m.height+a.y,a.width,a.height))}),d.fillStyle="#111",m.wheels.forEach((a,l)=>{Math.floor(l/2)===e&&(d.beginPath(),d.arc(t+a.x,m.y+a.y,a.radius,0,2*Math.PI),d.fill(),d.strokeStyle="#444",d.lineWidth=1.5,d.beginPath(),d.arc(t+a.x,m.y+a.y,.6*a.radius,0,2*Math.PI),d.stroke())}),e>0&&(d.fillStyle="#333",d.fillRect(t-5,m.y-m.height/2,5,5)))}Math.random()>.7&&!e&&m.smoke.push({x:m.x+12,y:m.y-m.height-10,radius:3+4*Math.random(),alpha:.9,speed:.3+.6*Math.random()});for(let e=m.smoke.length-1;e>=0;e--){let t=m.smoke[e];t.y-=t.speed,t.x-=.2*t.speed,t.radius+=.2,t.alpha-=.008,t.alpha<=0?m.smoke.splice(e,1):(d.fillStyle="rgba(200, 200, 200, ".concat(t.alpha,")"),d.beginPath(),d.arc(t.x,t.y,t.radius,0,2*Math.PI),d.fill())}Date.now()-l<2e4?t=requestAnimationFrame(v):(f(M),s(31),g(!0))};return v(),()=>{clearInterval(i),clearInterval(o),cancelAnimationFrame(t),window.removeEventListener("resize",c)}},[]),(0,l.jsxs)("div",{className:h().container,children:[(0,l.jsx)("audio",{ref:o,src:"/music/M500000vyP282Pn71W.mp3",loop:!0,onCanPlayThrough:()=>m(!0)}),(0,l.jsxs)("div",{className:h().header,children:[(0,l.jsx)("div",{ref:t,className:h().text,children:d}),(0,l.jsx)("div",{ref:a,className:h().counter,children:(0,l.jsx)("div",{className:h().counterCircle,children:(0,l.jsx)("span",{children:n})})})]}),u&&(0,l.jsx)("button",{className:h().musicBtn,onClick:()=>{let e=o.current;e&&(e.paused?(e.play(),p(!0)):(e.pause(),p(!1)))},children:y?"暂停音乐":"播放音乐"}),(0,l.jsx)("canvas",{ref:e,className:h().canvas}),c&&(0,l.jsx)("canvas",{ref:i,className:h().celebrationCanvas})]})}},7931:(e,t,a)=>{Promise.resolve().then(a.bind(a,5956))}},e=>{var t=t=>e(e.s=t);e.O(0,[163,441,684,358],()=>t(7931)),_N_E=e.O()}]);